parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"XGi3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.winNum=exports.clearField=exports.size=void 0;var e=4;exports.size=e;var r=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];exports.clearField=r;var s=2048;exports.winNum=s;
},{}],"w8i0":[function(require,module,exports) {
"use strict";function r(r,o){for(var e=[],t=0;t<o;t++){var n=[r[0][t],r[1][t],r[2][t],r[3][t]];e.push(n)}return e}function o(r,o){for(var e=[],t=0;t<o;t++)for(var n=0;n<o&&4!==e.length;n++){var s=r[t][n];if(s){var u=t>0?r[t-1][n]:null,a=t<o-1?r[t+1][n]:null,i=n>0?r[t][n-1]:null,l=n<o-1?r[t][n+1]:null;0!==i&&i!==s||!e.includes("ArrowLeft")&&e.push("ArrowLeft"),0!==l&&l!==s||!e.includes("ArrowRight")&&e.push("ArrowRight"),0!==u&&u!==s||!e.includes("ArrowUp")&&e.push("ArrowUp"),0!==a&&a!==s||!e.includes("ArrowDown")&&e.push("ArrowDown")}}return e}function e(r){var o=r.end.X-r.start.X,e=r.end.Y-r.start.Y;if(!(Math.abs(o+e)<50)){var t=e<0?"ArrowUp":"ArrowDown",n=o<0?"ArrowLeft":"ArrowRight";return Math.abs(e)>Math.abs(o)?t:n}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.rotateField=r,exports.checkPossibleMoves=o,exports.convertSwipeToArrow=e;
},{}],"KIzB":[function(require,module,exports) {
"use strict";var e=require("./constants"),t=require("./helpers");function r(e){return a(e)||i(e)||o(e)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function i(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function a(e){if(Array.isArray(e))return c(e)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=document.querySelector(".game-field"),l=document.querySelector(".message-start"),d=document.querySelector(".message-win"),u=document.querySelector(".message-lose"),f=document.querySelector(".start"),v=document.querySelector(".restart"),h=document.querySelector(".game-score"),m=document.querySelector(".game-best-score"),g=+localStorage.score||0,S=+localStorage.bestScore||0,y=localStorage.isPlaying,b=y?JSON.parse(localStorage.field):e.clearField,L=!1,p=!1,w=[],A=function(e){return e.filter(function(e){return 0!==e})},M=function(){return Math.floor(Math.random()*e.size)},z=function(){return Math.floor(10*Math.random())};function q(){for(var t=0;t<e.size;t++)for(var r=0;r<e.size;r++){var n=b[t][r]||"",o=n>0?"field-cell--".concat(n):"";s.insertAdjacentHTML("beforeend",'\n      <div\n        class="field-cell '.concat(o,'"\n        id="').concat(t,"-").concat(r,'"\n      >\n        ').concat(n,"\n      </div>\n    "))}}function E(){if(y)return l.classList.add("hidden"),w=(0,t.checkPossibleMoves)(b,e.size),void N();l.classList.add("hidden"),X(),X(),N(),w=(0,t.checkPossibleMoves)(b,e.size)}q(),y&&(h.innerText=g,m.innerHTML=S,f.classList.add("hidden"),v.classList.remove("hidden"),E()),f.addEventListener("click",function(e){localStorage.isPlaying=!0,f.classList.add("hidden"),v.classList.remove("hidden"),E()}),v.addEventListener("click",function(t){localStorage.field=JSON.stringify(e.clearField),b=JSON.parse(localStorage.field),localStorage.isPlaying=!1,y=localStorage.isPlaying,u.classList.add("hidden"),d.classList.add("hidden"),x(null),X(),X(),E()}),document.addEventListener("keyup",function(e){k(e.code)});var T={start:{X:0,Y:0},end:{X:0,Y:0}};function k(r){if(w.includes(r)){switch(r){case"ArrowLeft":case"ArrowRight":b=O(r,b);break;case"ArrowUp":case"ArrowDown":var n=O(r,(0,t.rotateField)(b,e.size));b=(0,t.rotateField)(n,e.size)}X(),Y(),w=(0,t.checkPossibleMoves)(b,e.size),j(),N()}}function O(t,n){for(var o=n.map(function(e){return r(e)}),i=0;i<e.size;i++){var a=o[i];a="ArrowRight"===t||"ArrowDown"===t?(a=P(a=a.reverse())).reverse():P(a),o[i]=a}return o}function P(t){t=A(t);for(var r=0;r<t.length-1;r++)t[r]===t[r+1]&&(t[r]*=2,t[r+1]=0,x(t[r]));var n=(t=A(t)).length;return t.length=e.size,t=t.fill(0,n,e.size)}function N(){localStorage.field=JSON.stringify(b);for(var t=0;t<e.size;t++)for(var r=0;r<e.size;r++){var n=b[t][r],o="".concat(t,"-").concat(r),i=document.getElementById(o);i.innerText="",i.className="field-cell",n>0&&(i.innerText=n,i.classList.add("field-cell--".concat(n)))}}function X(){for(var e=!1,t=4===z()?4:2;!e;){var r=M(),n=M();0===b[r][n]&&(b[r][n]=t,e=!0)}}function Y(){b.forEach(function(t){t.find(function(t){return t===e.winNum})&&(d.classList.remove("hidden"),L=!0)})}function j(){if(0===w.length)return u.classList.remove("hidden"),void(p=!0)}function x(e){null===e?(g=0,localStorage.score=g):(g+=e,localStorage.score=g,g>S&&F(g)),h.innerText=g}function F(e){S=e,localStorage.bestScore=e,m.innerHTML=S}s.addEventListener("touchstart",function(e){T.start.X=Math.abs(e.touches[0].clientX),T.start.Y=Math.abs(e.touches[0].clientY)}),s.addEventListener("touchmove",function(e){e.preventDefault(),T.end.X=Math.abs(e.touches[0].clientX),T.end.Y=Math.abs(e.touches[0].clientY)}),s.addEventListener("touchend",function(e){k((0,t.convertSwipeToArrow)(T))});
},{"./constants":"XGi3","./helpers":"w8i0"}]},{},["KIzB"], null)
//# sourceMappingURL=main.13028272.js.map